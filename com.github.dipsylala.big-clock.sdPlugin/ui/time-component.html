<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Time Component Settings</title>
    <script src="sdpi-components.js"></script>
    <link rel="stylesheet" href="time-component.css">
</head>
<body>
    <sdpi-item label="Component">
        <sdpi-select setting="component" default="hour1">
            <option value="hour1">Hour - First Digit</option>
            <option value="hour2">Hour - Second Digit</option>
            <option value="fullHour">Full Hour (HH)</option>
            <option value="minute1">Minute - First Digit</option>
            <option value="minute2">Minute - Second Digit</option>
            <option value="fullMinute">Full Minute (MM)</option>
            <option value="second1">Second - First Digit</option>
            <option value="second2">Second - Second Digit</option>
            <option value="fullSecond">Full Second (SS)</option>
            <option value="colon">Colon (:)</option>
        </sdpi-select>
    </sdpi-item>

    <sdpi-item label="Time Format">
        <sdpi-select setting="format24Hour" default="false">
            <option value="false">12-Hour</option>
            <option value="true">24-Hour</option>
        </sdpi-select>
    </sdpi-item>

    <sdpi-item label="Blink Colons">
        <sdpi-checkbox setting="blinkColons" default></sdpi-checkbox>
    </sdpi-item>

    <sdpi-item label="Text Color">
        <sdpi-color setting="textColor" default="#FFFFFF"></sdpi-color>
    </sdpi-item>

    <sdpi-item label="Background Color">
        <sdpi-color setting="backgroundColor" default="#000000"></sdpi-color>
    </sdpi-item>

    <sdpi-item label="Font Size">
        <div class="font-size-container">
            <div class="font-size-current-display" id="fontSizeCurrentDisplay">96px</div>
            <sdpi-range setting="fontSize" min="20" max="144" default="96" showlabels id="fontSizeSlider">
            </sdpi-range>
        </div>
    </sdpi-item>

    <sdpi-item label="Font Family">
        <sdpi-select setting="fontFamily" default="Arial">
            <option value="Arial">Arial</option>
            <option value="Helvetica">Helvetica</option>
            <option value="Times New Roman">Times New Roman</option>
            <option value="Courier New">Courier New</option>
            <option value="Georgia">Georgia</option>
            <option value="Verdana">Verdana</option>
        </sdpi-select>
    </sdpi-item>

    <script>
        // Wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            const fontSizeSlider = document.getElementById('fontSizeSlider');
            const fontSizeCurrentDisplay = document.getElementById('fontSizeCurrentDisplay');
            
            // Function to update the current value display
            function updateCurrentDisplay(value) {
                if (fontSizeCurrentDisplay && value !== null && value !== undefined) {
                    fontSizeCurrentDisplay.textContent = value + 'px';
                    console.log('**** Updated current display to:', value + 'px');
                }
            }
            
            // Function to get current value from various sources
            function getCurrentValue() {
                if (fontSizeSlider) {
                    const inputElement = fontSizeSlider.shadowRoot?.querySelector('input[type="range"]');
                    if (inputElement) {
                        return inputElement.value || inputElement.title || inputElement.getAttribute('value') || 
                               fontSizeSlider.getAttribute('value') || fontSizeSlider.getAttribute('default') || '96';
                    }
                    return fontSizeSlider.getAttribute('value') || fontSizeSlider.getAttribute('default') || '96';
                }
                return '96';
            }
            
            if (fontSizeSlider) {
                const inputElement = fontSizeSlider.shadowRoot?.querySelector('input[type="range"]');
                
                if (inputElement) {
                    console.log('**** Found shadow DOM input element, setting up listeners');
                    
                    // Listen for input events on the actual input element (real-time while dragging)
                    inputElement.addEventListener('input', function(e) {
                        updateCurrentDisplay(e.target.value);
                    });
                    
                    // Listen for change events on the actual input element (when dragging ends)
                    inputElement.addEventListener('change', function(e) {
                        updateCurrentDisplay(e.target.value);
                    });
                    
                    // Update display with current value
                    updateCurrentDisplay(inputElement.value || inputElement.title || inputElement.getAttribute('value') || 
                               fontSizeSlider.getAttribute('value') || fontSizeSlider.getAttribute('default') || '96');
                    return true;
                }
            } else {
                console.log('**** Font size slider not found');
            }
        });
    </script>
</body>
</html>
